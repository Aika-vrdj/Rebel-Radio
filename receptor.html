<!DOCTYPE html>
<html>
<head>
    <title>Rebel Radio Receiver</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body style="background: transparent; color: cyan; font-family: monospace;">
    <div id="status">SINTONIZANDO REBEL RADIO...</div>
    <script>
        const supabase = supabase.createClient('TU_URL', 'TU_KEY');

        // Escuchar la señal en tiempo real
        supabase
          .channel('broadcasts')
          .on('postgres_changes', { event: 'INSERT', schema: 'public', table: 'broadcasts' }, payload => {
            const data = payload.new;
            document.getElementById('status').innerText = "RECIBIENDO: " + data.content;
            
            // Reproducir el audio Base64 que mandó la webapp
            const audio = new Audio("data:audio/mp3;base64," + data.audio_base64);
            audio.play();
          })
          .subscribe();
    </script>
</body>
</html>